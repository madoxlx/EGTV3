
> rest-express@1.0.0 dev
> cross-env NODE_ENV=development tsx server/index.ts

ğŸ”‘ Google AI API Key status: Found (AIzaSyBLsu...)
ğŸ” Full environment check: {
  hasGoogleAIKey: false,
  hasOldGoogleKey: false,
  hasGeminiKey: false,
  nodeEnv: 'development',
  keyLength: 39,
  usingFallback: true
}
âœ… Database connection established
ğŸ” Setting up admin users...
âŒ Error setting up admin users: error: column "date_of_birth" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async setupAdmin (/home/runner/workspace/server/admin-setup.ts:20:27)
    at async <anonymous> (/home/runner/workspace/server/index.ts:106:7) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '190',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
âœ… Admin setup completed
âœ… Unified auth setup completed
âœ… Hero slides routes setup completed
ğŸ”§ Setting up upload routes...
âœ… Upload routes and static serving setup completed
ğŸ”§ Setting up upload routes...
âœ… API routes registered successfully
âš ï¸  Skipping automatic database initialization to prevent startup delays
ğŸ’¡ Database is already configured and ready to use
âœ… Vite development setup completed
9:11:56 AM [express] âœ… Server serving on port 8080
ğŸŒ Application available at http://localhost:8080
âœ… Database connection verified
ğŸ”§ Session Debug - GET /src/lib/admin-route.tsx
   Session ID: nlXdWNu1U2y3IaPkZmPETVERqvexq4di
   Session User: None
ğŸ”§ Session Debug - GET /src/components/admin/SessionGuard.tsx
   Session ID: CFjqX1pJAkT5U90_Is02UgWT2Olsdud-
   Session User: None
ğŸ”¥ API ROUTE DEBUG: GET /api/menus/location/header
ğŸ”¥ Query params: {}
ğŸ”¥ STORAGE: getMenuByLocation called with location: header
ğŸ”¥ STORAGE: getMenuByLocation query returned: 1 results
ğŸ”¥ STORAGE: Found menu: {"id":1,"name":"Header Menu","location":"header","description":"Main navigation menu","active":true,"createdAt":"2025-07-30T08:44:08.369Z","updatedAt":null}
ğŸ”¥ API ROUTE DEBUG: GET /api/cities
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE DEBUG: GET /api/destinations
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE DEBUG: GET /api/countries
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE: GET /api/countries
ğŸ”¥ Query params: {}
ğŸ”¥ Active filter: undefined
ğŸ” listCountries called with active: undefined
9:12:04 AM [express] GET /api/menus/location/header 304 in 106ms
ğŸ”¥ API ROUTE DEBUG: GET /api/packages
ğŸ”¥ Query params: {}
9:12:04 AM [express] GET /api/tour-categories 304 in 159ms
ğŸ” listCountries returning: 0 countries
ğŸ” Sample data: undefined
ğŸ”¥ Countries returned from storage: 0
9:12:04 AM [express] GET /api/countries 304 in 169ms
9:12:04 AM [express] GET /api/cities 304 in 180ms
ğŸ”¥ API ROUTE DEBUG: GET /api/homepage-sections?active=true
ğŸ”¥ Query params: { active: 'true' }
9:12:04 AM [express] GET /api/destinations 304 in 177ms
Error listing packages: error: column "route" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listPackages (/home/runner/workspace/server/storage.ts:633:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:594:24) {
  length: 106,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '293',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
Error listing homepage sections: error: column "tourists_label" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listHomepageSections (/home/runner/workspace/server/storage.ts:1124:16)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6685:24) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '149',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
ğŸ”¥ API ROUTE DEBUG: GET /api/menus/location/footer
ğŸ”¥ Query params: {}
ğŸ”¥ STORAGE: getMenuByLocation called with location: footer
ğŸ”¥ STORAGE: getMenuByLocation query returned: 1 results
ğŸ”¥ STORAGE: Found menu: {"id":2,"name":"Footer Menu","location":"footer","description":"Footer navigation menu","active":true,"createdAt":"2025-07-30T08:44:08.369Z","updatedAt":null}
Error: error: column "date_of_birth" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Strategy._verify (/home/runner/workspace/server/unified-auth.ts:58:22) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '190',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:13:42 AM [express] POST /api/login 500 in 170ms
Error: error: column "date_of_birth" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Strategy._verify (/home/runner/workspace/server/unified-auth.ts:58:22) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '190',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:13:43 AM [express] POST /api/login 500 in 225ms
ğŸ”¥ API ROUTE DEBUG: GET /api/packages
ğŸ”¥ Query params: {}
Error listing packages: error: column "transportation" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listPackages (/home/runner/workspace/server/storage.ts:633:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:594:24) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '517',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:14:35 AM [express] GET /api/packages 200 in 156ms
ğŸ”¥ API ROUTE DEBUG: GET /api/homepage-sections
ğŸ”¥ Query params: {}
Error listing homepage sections: error: column "feature1_title" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listHomepageSections (/home/runner/workspace/server/storage.ts:1131:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6685:24) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '270',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:14:41 AM [express] GET /api/homepage-sections 200 in 153ms
Error: error: column "passport_number" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Strategy._verify (/home/runner/workspace/server/unified-auth.ts:58:22) {
  length: 116,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '207',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:14:42 AM [express] POST /api/login 500 in 153ms
Error: error: column "phone_verified" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Strategy._verify (/home/runner/workspace/server/unified-auth.ts:58:22) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '435',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:15:23 AM [express] POST /api/login 500 in 174ms
Error: error: column "last_login_at" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async Strategy._verify (/home/runner/workspace/server/unified-auth.ts:58:22) {
  length: 114,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '453',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
9:15:33 AM [express] POST /api/login 500 in 153ms
9:15:40 AM [express] POST /api/login 400 in 155ms
ğŸ”¥ API ROUTE DEBUG: GET /api/packages
ğŸ”¥ Query params: {}
Error listing packages: error: column "transportation" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listPackages (/home/runner/workspace/server/storage.ts:633:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:594:24) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '517',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'
}
ğŸ”¥ API ROUTE DEBUG: GET /api/homepage-sections
ğŸ”¥ Query params: {}
Error listing homepage sections: error: column "feature1_title" does not exist
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async NeonPreparedQuery.execute (/home/runner/workspace/node_modules/src/neon-serverless/session.ts:102:18)
    at async DatabaseStorage.listHomepageSections (/home/runner/workspace/server/storage.ts:1131:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:6685:24) {
  length: 115,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '270',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3722',
  routine: 'errorMissingColumn'