
> rest-express@1.0.0 dev
> cross-env NODE_ENV=development tsx server/index.ts

Database URL: postgresql:****@20.77.106.39:5432/mydb
Attempting to connect to external PostgreSQL database...
Database URL: postgresql:****@20.77.106.39:5432/mydb
ğŸ”‘ Google AI API Key status: Found (AIzaSyBLsu...)
ğŸ” Full environment check: {
  hasGoogleAIKey: false,
  hasOldGoogleKey: false,
  hasGeminiKey: false,
  nodeEnv: 'development',
  keyLength: 39,
  usingFallback: true
}
â³ Waiting for database initialization...
âœ… Database connection established successfully
Connected to database: mydb
âœ… Database initialized.
ğŸ” Setting up admin users...
âœ… Main admin user already exists
âœ… Test admin user already exists
âœ… Admin setup completed
âœ… Unified auth setup completed
âœ… Hero slides routes setup completed
ğŸ”§ Setting up upload routes...
âœ… Upload routes and static serving setup completed
ğŸ”§ Setting up upload routes...
âœ… API routes registered successfully
âš ï¸  Skipping automatic database initialization to prevent startup delays
ğŸ’¡ Database is already configured and ready to use
âœ… Vite development setup completed
10:11:11 AM [express] âœ… Server serving on port 8080
ğŸŒ Application available at http://localhost:8080
âœ… Database connection verified
ğŸ”§ Session Debug - GET /src/lib/admin-route.tsx
   Session ID: Xd7utmlN-BIMPylzT5yN35fMl1i-BbwF
   Session User: None
ğŸ”§ Session Debug - GET /src/lib/admin-route.tsx
   Session ID: tSzlI0pk6vR9slPijKLZicDQyTe-P8-v
   Session User: None
ğŸ”§ Session Debug - GET /src/components/admin/SessionGuard.tsx
   Session ID: AmLen0yhw__YbXlDHJLbK8ZtJPuveWLt
   Session User: None
ğŸ”¥ API ROUTE DEBUG: GET /api/menus/location/header
ğŸ”¥ Query params: {}
ğŸ”¥ STORAGE: getMenuByLocation called with location: header
ğŸ”¥ API ROUTE DEBUG: GET /api/cities
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE DEBUG: GET /api/destinations
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE DEBUG: GET /api/countries
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE: GET /api/countries
ğŸ”¥ Query params: {}
ğŸ”¥ Active filter: undefined
ğŸ” listCountries called with active: undefined
ğŸ”¥ STORAGE: getMenuByLocation query returned: 1 results
ğŸ”¥ STORAGE: Found menu: {"id":1,"name":"Header Menu","location":"header","description":"Main navigation menu","active":true,"createdAt":"2025-07-20T10:21:53.131Z","updatedAt":null}
10:11:54 AM [express] GET /api/menus/location/header 200 in 213ms
ğŸ”¥ API ROUTE DEBUG: GET /api/packages
ğŸ”¥ Query params: {}
ğŸ”¥ API ROUTE DEBUG: GET /api/homepage-sections?active=true
ğŸ”¥ Query params: { active: 'true' }
10:11:54 AM [express] GET /api/packages 200 in 209ms
ğŸ”¥ API ROUTE DEBUG: GET /api/menus/location/footer
ğŸ”¥ Query params: {}
ğŸ”¥ STORAGE: getMenuByLocation called with location: footer
ğŸ”¥ STORAGE: getMenuByLocation query returned: 1 results
ğŸ”¥ STORAGE: Found menu: {"id":2,"name":"Footer Menu","location":"footer","description":"Footer navigation menu","active":true,"createdAt":"2025-07-20T10:21:53.131Z","updatedAt":null}
10:11:54 AM [express] GET /api/tour-categories 200 in 848ms
10:11:54 AM [express] GET /api/cities 200 in 847ms
ğŸ” listCountries returning: 6 countries
ğŸ” Sample data: {
  id: 1,
  name: 'Egypt',
  code: 'EG',
  description: 'The land of pharaohs and ancient wonders',
  imageUrl: null,
  active: true,
  createdAt: 2025-07-20T11:02:42.638Z,
  updatedAt: null
}
ğŸ”¥ Countries returned from storage: 6
10:11:54 AM [express] GET /api/countries 200 in 848ms
10:11:54 AM [express] GET /api/destinations 200 in 857ms
10:11:54 AM [express] GET /api/menus/location/footer 200 in 202ms
10:11:55 AM [express] GET /api/translations/settings 200 in 108ms
10:11:55 AM [express] GET /api/homepage-sections 200 in 834ms
10:11:55 AM [express] GET /api/translations 200 in 420ms
10:12:13 AM [express] POST /api/login 400 in 162ms
10:12:15 AM [express] POST /api/login 400 in 155ms
10:12:20 AM [express] POST /api/login 200 in 152ms
ğŸ”¥ API ROUTE DEBUG: GET /api/cart
ğŸ”¥ Query params: {}
Cart GET request - userId: 3 sessionId: undefined
Found cart items: 1
10:12:20 AM [express] GET /api/cart 200 in 210ms
ğŸ”¥ API ROUTE DEBUG: GET /api/tours
ğŸ”¥ Query params: {}
Error listing tours: error: column "active" does not exist
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.listTours (/home/runner/workspace/server/storage.ts:964:14)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1026:21) {
  length: 107,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '160',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3647',
  routine: 'errorMissingColumn'
}
10:12:47 AM [express] GET /api/tours 200 in 123ms
ğŸ”§ Session Debug - GET /api/admin/rooms
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”¥ API ROUTE DEBUG: GET /api/admin/rooms
ğŸ”¥ Query params: {}
ğŸ” Admin check - Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
ğŸ” Admin check - Session user: {
  id: 3,
  username: 'EETADMIN',
  role: 'admin',
  displayName: 'Admin User',
  avatarUrl: null,
  email: 'admin@egyptexpress.com'
}
ğŸ” Admin check - Request path: /api/admin/rooms
âœ… Admin check passed for user: EETADMIN (ID: 3)
Admin rooms endpoint called
ğŸ” Listing rooms with hotelId: undefined
âœ… Rooms query result: 13 rooms found
ğŸ“‹ Sample room: { id: 13, name: 'Single Garden view room', hotel_id: 7 }
Rooms returned from storage: 13 rooms
10:12:47 AM [express] GET /api/admin/rooms 200 in 110ms
ğŸ”§ Session Debug - GET /src/pages/admin/AdminDashboard.tsx
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”§ Session Debug - GET /api/admin/dashboard-stats
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”¥ API ROUTE DEBUG: GET /api/admin/dashboard-stats
ğŸ”¥ Query params: {}
ğŸ”§ Session Debug - GET /api/user
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ” User endpoint - Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
ğŸ” User endpoint - Session user: {
  id: 3,
  username: 'EETADMIN',
  role: 'admin',
  displayName: 'Admin User',
  avatarUrl: null,
  email: 'admin@egyptexpress.com'
}
ğŸ”§ Session Debug - GET /api/admin/dashboard-stats
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”¥ API ROUTE DEBUG: GET /api/admin/dashboard-stats
ğŸ”¥ Query params: {}
ğŸ”§ Session Debug - GET /src/pages/admin/tours/create.tsx
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”§ Session Debug - GET /api/user
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ” User endpoint - Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
ğŸ” User endpoint - Session user: {
  id: 3,
  username: 'EETADMIN',
  role: 'admin',
  displayName: 'Admin User',
  avatarUrl: null,
  email: 'admin@egyptexpress.com'
}
10:13:00 AM [express] GET /api/tour-categories 304 in 103ms
ğŸ”§ Session Debug - POST /api/admin/tours
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”¥ API ROUTE DEBUG: POST /api/admin/tours
ğŸ”¥ Query params: {}
ğŸ” Admin check - Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
ğŸ” Admin check - Session user: {
  id: 3,
  username: 'EETADMIN',
  role: 'admin',
  displayName: 'Admin User',
  avatarUrl: null,
  email: 'admin@egyptexpress.com'
}
ğŸ” Admin check - Request path: /api/admin/tours
âœ… Admin check passed for user: EETADMIN (ID: 3)
Tour creation request received: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "categoryId": 2,
  "duration": 4,
  "durationType": "hours",
  "price": 200000,
  "currency": "EGP",
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "maxCapacity": 10,
  "maxGroupSize": 10,
  "numPassengers": 10,
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "galleryUrls": [],
  "active": true,
  "featured": false,
  "tripType": "",
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "gallery": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "title": "journy to siwa"
}
Processed tour data: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "categoryId": 2,
  "duration": 4,
  "durationType": "hours",
  "price": 200000,
  "currency": "EGP",
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "maxCapacity": 10,
  "maxGroupSize": 10,
  "numPassengers": 10,
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "active": true,
  "featured": false,
  "tripType": "",
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "title": "journy to siwa"
}
Final tour data to be saved: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Creating tour with data: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Processed tour data before insert: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Error in createTour: error: column "active" of relation "tours" does not exist
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.createTour (/home/runner/workspace/server/storage.ts:981:25)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:3043:23) {
  length: 125,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '174',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_target.c',
  line: '1075',
  routine: 'checkInsertTargets'
}
Error creating tour: error: column "active" of relation "tours" does not exist
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.createTour (/home/runner/workspace/server/storage.ts:981:25)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:3043:23) {
  length: 125,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '174',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_target.c',
  line: '1075',
  routine: 'checkInsertTargets'
}
10:15:33 AM [express] POST /api/admin/tours 500 in 223ms
ğŸ”§ Session Debug - POST /api/admin/tours
   Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
   Session User: EETADMIN (admin)
ğŸ”¥ API ROUTE DEBUG: POST /api/admin/tours
ğŸ”¥ Query params: {}
ğŸ” Admin check - Session ID: 2biN9j3j0opMM1jO-lzo1crao55Sihzy
ğŸ” Admin check - Session user: {
  id: 3,
  username: 'EETADMIN',
  role: 'admin',
  displayName: 'Admin User',
  avatarUrl: null,
  email: 'admin@egyptexpress.com'
}
ğŸ” Admin check - Request path: /api/admin/tours
âœ… Admin check passed for user: EETADMIN (ID: 3)
Tour creation request received: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "categoryId": 2,
  "duration": 4,
  "durationType": "hours",
  "price": 200000,
  "currency": "EGP",
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "maxCapacity": 10,
  "maxGroupSize": 10,
  "numPassengers": 10,
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "galleryUrls": [],
  "active": true,
  "featured": false,
  "tripType": "",
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "gallery": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "title": "journy to siwa"
}
Processed tour data: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "categoryId": 2,
  "duration": 4,
  "durationType": "hours",
  "price": 200000,
  "currency": "EGP",
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "maxCapacity": 10,
  "maxGroupSize": 10,
  "numPassengers": 10,
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "active": true,
  "featured": false,
  "tripType": "",
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "title": "journy to siwa"
}
Final tour data to be saved: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Creating tour with data: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Processed tour data before insert: {
  "name": "journy to siwa",
  "description": "journy to siwajourny to siwajourny to siwajourny to siwajourny to siwa",
  "destinationId": 3,
  "duration": 4,
  "price": 200000,
  "maxCapacity": 10,
  "adultPrice": 40000,
  "childPrice": 20000,
  "infantPrice": 10000,
  "imageUrl": "/uploads/tour-1753352014220-n6raimhrhpl.png",
  "active": true,
  "featured": false,
  "currency": "EGP",
  "galleryUrls": [
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/e1e97b99-9664-4a25-b5f8-dbacafb9971f",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/4ecf7b73-3745-4533-b5b0-d21753996b7d",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/40af854f-0adb-44f1-bd4f-9d9b6e48477c",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/d400cb7b-d16a-44a7-a25c-716d71f40bae",
    "blob:https://ca404b92-c670-427d-98d7-959261fd2cb9-00-21o2ei3t75whm.riker.replit.dev:8080/a302f9cc-a297-4534-93b2-f61ea11df62f"
  ],
  "startDate": null,
  "endDate": null,
  "tripType": "",
  "numPassengers": 10,
  "included": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "excluded": [
    "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa"
  ],
  "itinerary": "A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa A trip to Siwa",
  "maxGroupSize": 10,
  "rating": 5,
  "reviewCount": 7,
  "nameAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "descriptionAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "itineraryAr": " Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡",
  "includedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "excludedAr": [
    "Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡  Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡ Ø±Ø­Ù„Ø© Ù„Ø³ÙŠÙˆÙ‡"
  ],
  "hasArabicVersion": true,
  "categoryId": 2,
  "durationType": "hours",
  "date": null,
  "createdBy": 3,
  "updatedBy": 3
}
Error in createTour: error: column "active" of relation "tours" does not exist
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.createTour (/home/runner/workspace/server/storage.ts:981:25)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:3043:23) {
  length: 125,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '174',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_target.c',
  line: '1075',
  routine: 'checkInsertTargets'
}
Error creating tour: error: column "active" of relation "tours" does not exist
    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)
    at async DatabaseStorage.createTour (/home/runner/workspace/server/storage.ts:981:25)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:3043:23) {
  length: 125,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '174',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_target.c',
  line: '1075',
  routine: 'checkInsertTargets'
}
10:15:36 AM [express] POST /api/admin/tours 500 in 218ms